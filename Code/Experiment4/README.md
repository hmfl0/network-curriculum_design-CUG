# Experiment 4: 跨链路的多机通信实验（网络层 - DV算法）

## 实验介绍
本实验在复杂网状拓扑（Mesh）中，利用 **Distance Vector (距离向量)** 路由算法实现多机动态路由通信。每台 PC 都是一个对等的路由器节点，能够自动发现邻居、计算全网路径，并对网络变化（如断线）做出反应。

## 核心算法优化 (Optimization)
为了解决原始 DV 算法可能产生的路由环路和“计数到无穷”问题，本实现加入了以下优化：
1.  **毒性逆转 (Poison Reverse)**: 向邻居通告路由时，如果经由该邻居转发，则谎报开销为无穷大。
2.  **触发更新 (Triggered Updates)**: 路由表发生重要变化时（Cost变大或不可达），立即触发广播，而不是等待周期定时器。
3.  **隐式毒化 (Implicit Poisoning)**: 如果下一跳邻居停止通告某条路由，立即将其标记为不可达。

## 协议字段
通信协议定义在 `router.py` 中，采用文本格式：`TYPE|Field1|Field2...`
1.  **邻居发现 (Hello)**: `HELLO|SenderID`
2.  **路由通告 (DV)**: `DV|SenderID|JSON_Table` (针对每个端口不同内容)
3.  **数据传输 (Data)**: `DATA|SrcID|DstID|Payload`

## 使用说明

### 1. 硬件连接
任意连接各台电脑，形成网状结构。确保每条连线是 **交叉线** (TX-RX)。

### 2. 启动程序
在每台电脑上运行：
```shell
python Code/Experiment4/router.py
```

### 3. 操作指令
- **`table`**: 查看当前路由表。
- **`send <Dest> <Msg>`**: 向指定节点发送文本消息。
- **`exit`**: 退出。

### 4. 实验现象
- **收敛过程**: 几秒钟后，使用 `table` 命令应能看到去往全网所有节点的路由。
- **断路测试**: 拔线后，受影响的节点会迅速更新路由表为 `999` (不可达) 或切换备用路径。

