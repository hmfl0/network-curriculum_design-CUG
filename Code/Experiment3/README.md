# 实验三：简单拓扑的多机通信实验（链路层）

## 实验介绍
本实验在实验二的基础上，扩展为多机通信。构建一个简单的树形拓扑网络（1个根节点连接多个叶子节点），实现任意节点之间的数据帧转发功能。

## 网络拓扑
- **根节点 (Root)**: 充当类似交换机/路由器的角色，负责不同叶子节点间的数据转发。
- **叶子节点 (Leaf)**: 普通终端设备，仅与根节点直连。

例如：
```
       [Root PC1]
      /    |    \
  [Leaf] [Leaf] [Leaf]
   ID2    ID3    ID4
```
若 ID2 想发消息给 ID3，路径为：`ID2 -> Root -> ID3`

## 文件说明

### root.py - 根节点程序 (PC1运行)
- **功能**: 管理多个串口，维护转发表 (Routing Table)。
- **操作**: 启动后，需配置连接到各个串口的设备ID（如 COM4连接ID2）。
- **转发**: 收到消息后，解析目标ID，查找转发表并从对应串口转发出去。

### leaf.py - 叶子节点程序 (PC2/3/4运行)
- **功能**: 模拟终端设备，连接到根节点。
- **操作**: 启动后，指定本机ID（如 ID2）。
- **通信**: 输入 `目标ID 消息内容` 发送数据。

## 运行步骤

### 1. 启动根节点 (PC1)
1. 运行 `root.py`。
2. 根据提示输入连接叶子节点的串口和对应的设备ID。
   ```text
   请输入端口号: COM4
   该端口连接的设备ID是?: ID2
   
   请输入端口号: COM5
   该端口连接的设备ID是?: ID3
   
   ...输入 done 完成配置
   ```

### 2. 启动叶子节点 (PC2, PC3...)
1. 运行 `leaf.py`。
2. 输入连接到根节点的串口（例如 COM4）。
3. 输入本机ID（例如 PC2 输入 ID2）。
   ```text
   本机ID设置为: ID2
   ```

### 3. 测试通信
在 PC2 (ID2) 的控制台中输入：
```text
> ID3 你好，我是ID2
```
此时：
1. PC2 发送帧 `ID2|ID3|你好，我是ID2` 给 PC1。
2. PC1 收到帧，查表发现 ID3 在 COM5，遂转发给 PC3。
3. PC3 收到帧，显示消息。

## 注意事项
- 确保所有设备共底（GND相连）。
- 确保串口交叉连接 (TX接RX, RX接TX)。
- ID必须全局唯一。
